<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toolkit Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/marked/marked.min.js"></script>
  <style>
    body { background: #0f0f0f; }
    .prose h1 { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; color: #f9fafb; }
    .prose h2 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; color: #e5e7eb; }
    .prose h3 { font-size: 1.1rem; font-weight: 600; margin-top: 1rem; color: #d1d5db; }
    .prose p { color: #9ca3af; }
    .prose table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
    .prose th, .prose td { border: 1px solid #374151; padding: 0.5rem; text-align: left; color: #d1d5db; }
    .prose th { background: #1f2937; font-weight: 600; color: #f9fafb; }
    .prose tr:nth-child(even) { background: #111827; }
    .prose ul { list-style: disc; margin-left: 1.5rem; color: #9ca3af; }
    .prose li { margin-bottom: 0.25rem; }
    .prose code { background: #1f2937; color: #a78bfa; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.875rem; }
    .prose pre { background: #1a1a2e; color: #f9fafb; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; border: 1px solid #374151; }
    .prose a { color: #a78bfa; text-decoration: none; }
    .prose a:hover { text-decoration: underline; }
    .prose blockquote { border-left: 3px solid #7c3aed; padding-left: 1rem; color: #9ca3af; font-style: italic; margin: 1rem 0; }
    .prose hr { border-color: #374151; margin: 1.5rem 0; }
    .prose strong { color: #f9fafb; }
    .btn-nav { transition: all 0.2s ease; }
    .btn-nav:hover { transform: translateY(-1px); }
    .btn-nav.active { ring: 2px; ring-color: currentColor; }
    .stat-card { transition: all 0.2s ease; }
    .stat-card:hover { transform: translateY(-2px); }
  </style>
</head>
<body class="min-h-screen text-gray-100">
  <nav class="bg-gray-900/80 backdrop-blur-sm border-b border-gray-800 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-3">
      <div class="flex items-center justify-between">
        <h1 class="text-xl font-bold text-white">üõ†Ô∏è Toolkit Dashboard</h1>
        <div class="flex gap-2 flex-wrap">
          <button onclick="loadFile('PROJECTS.md')" id="btn-projects" class="btn-nav px-3 py-1.5 bg-purple-900/50 text-purple-300 rounded-lg hover:bg-purple-800/50 text-sm font-medium border border-purple-700/50">Projects</button>
          <button onclick="loadFile('CAPTURE.md')" id="btn-capture" class="btn-nav px-3 py-1.5 bg-blue-900/50 text-blue-300 rounded-lg hover:bg-blue-800/50 text-sm font-medium border border-blue-700/50">Capture</button>
          <button onclick="loadFile('CLIENTS.md')" id="btn-clients" class="btn-nav px-3 py-1.5 bg-green-900/50 text-green-300 rounded-lg hover:bg-green-800/50 text-sm font-medium border border-green-700/50">Clients</button>
          <button onclick="loadFile('RESEARCH.md')" id="btn-research" class="btn-nav px-3 py-1.5 bg-yellow-900/50 text-yellow-300 rounded-lg hover:bg-yellow-800/50 text-sm font-medium border border-yellow-700/50">Research</button>
          <button onclick="loadFile('CONTENT.md')" id="btn-content" class="btn-nav px-3 py-1.5 bg-pink-900/50 text-pink-300 rounded-lg hover:bg-pink-800/50 text-sm font-medium border border-pink-700/50">Content</button>
          <button onclick="loadFile('WEEKLY-REVIEW.md')" id="btn-review" class="btn-nav px-3 py-1.5 bg-indigo-900/50 text-indigo-300 rounded-lg hover:bg-indigo-800/50 text-sm font-medium border border-indigo-700/50">Review</button>
        </div>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <!-- Quick Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="stat-card bg-gradient-to-br from-purple-900/40 to-purple-950/40 rounded-xl p-5 border border-purple-700/30">
        <h2 class="text-sm font-medium text-purple-300 mb-1">Active Projects</h2>
        <p class="text-3xl font-bold text-white" id="stat-projects">2</p>
        <p class="text-xs text-purple-400 mt-1">Tapflow, Toolkit</p>
      </div>
      <div class="stat-card bg-gradient-to-br from-blue-900/40 to-blue-950/40 rounded-xl p-5 border border-blue-700/30">
        <h2 class="text-sm font-medium text-blue-300 mb-1">Open Tasks</h2>
        <p class="text-3xl font-bold text-white" id="stat-tasks">-</p>
        <p class="text-xs text-blue-400 mt-1">From capture inbox</p>
      </div>
      <div class="stat-card bg-gradient-to-br from-yellow-900/40 to-yellow-950/40 rounded-xl p-5 border border-yellow-700/30">
        <h2 class="text-sm font-medium text-yellow-300 mb-1">Pending Research</h2>
        <p class="text-3xl font-bold text-white" id="stat-research">-</p>
        <p class="text-xs text-yellow-400 mt-1">Topics to explore</p>
      </div>
      <div class="stat-card bg-gradient-to-br from-green-900/40 to-green-950/40 rounded-xl p-5 border border-green-700/30">
        <h2 class="text-sm font-medium text-green-300 mb-1">Clients</h2>
        <p class="text-3xl font-bold text-white" id="stat-clients">-</p>
        <p class="text-xs text-green-400 mt-1">Active accounts</p>
      </div>
    </div>

    <!-- Project Cards (always visible) -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8" id="project-cards">
      <div class="bg-gray-900/60 rounded-xl p-5 border border-gray-700/50 hover:border-purple-500/50 transition-colors">
        <div class="flex items-start justify-between mb-3">
          <div>
            <span class="text-2xl">üü°</span>
            <h3 class="text-lg font-semibold text-white inline ml-2">Tapflow</h3>
          </div>
          <span class="px-2 py-1 bg-yellow-900/50 text-yellow-300 text-xs rounded-full border border-yellow-700/50">In Progress</span>
        </div>
        <p class="text-gray-400 text-sm mb-3">AI-powered lead generation loop: scrape ‚Üí enrich ‚Üí score ‚Üí CRM ‚Üí outreach</p>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <span class="px-2 py-0.5 bg-red-900/30 text-red-400 rounded">High Priority</span>
          <span>‚Ä¢</span>
          <span>Next: GHL workflow + e2e test</span>
        </div>
      </div>
      <div class="bg-gray-900/60 rounded-xl p-5 border border-gray-700/50 hover:border-green-500/50 transition-colors">
        <div class="flex items-start justify-between mb-3">
          <div>
            <span class="text-2xl">‚úÖ</span>
            <h3 class="text-lg font-semibold text-white inline ml-2">Productivity Toolkit</h3>
          </div>
          <span class="px-2 py-1 bg-green-900/50 text-green-300 text-xs rounded-full border border-green-700/50">Complete</span>
        </div>
        <p class="text-gray-400 text-sm mb-3">Personal productivity system: capture, projects, research, content planning</p>
        <div class="flex items-center gap-2 text-xs text-gray-500">
          <span class="px-2 py-0.5 bg-green-900/30 text-green-400 rounded">In Use</span>
          <span>‚Ä¢</span>
          <span>Iterate based on feedback</span>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="bg-gray-900/60 rounded-xl border border-gray-700/50 p-6">
      <div id="content" class="prose max-w-none">
        <p class="text-gray-500">Select a section above to view...</p>
      </div>
    </div>
  </main>

  <footer class="max-w-7xl mx-auto px-4 py-6 text-center text-gray-600 text-sm">
    <p>Built with ü§ñ by OpenClaw ‚Ä¢ Last updated: <span id="timestamp"></span></p>
  </footer>

  <script>
    // Detect if running on GitHub Pages or locally
    const isGitHubPages = window.location.hostname.includes('github.io');
    const BASE_PATH = isGitHubPages ? '/toolkit' : '..';
    
    let currentFile = null;

    async function loadFile(filename) {
      try {
        const response = await fetch(`${BASE_PATH}/${filename}`);
        if (!response.ok) throw new Error(`File not found: ${filename}`);
        const text = await response.text();
        document.getElementById('content').innerHTML = marked.parse(text);
        updateStats(filename, text);
        updateActiveButton(filename);
        currentFile = filename;
      } catch (error) {
        document.getElementById('content').innerHTML = `
          <div class="text-center py-8">
            <p class="text-gray-500 mb-2">üìÑ ${filename}</p>
            <p class="text-red-400">${error.message}</p>
            <p class="text-gray-600 text-sm mt-2">Create this file in the toolkit directory to see content here.</p>
          </div>
        `;
      }
    }

    function updateActiveButton(filename) {
      // Remove active state from all buttons
      document.querySelectorAll('.btn-nav').forEach(btn => {
        btn.classList.remove('ring-2');
      });
      // Add active state to current button
      const btnId = 'btn-' + filename.replace('.md', '').toLowerCase().replace('weekly-', '');
      const btn = document.getElementById(btnId);
      if (btn) btn.classList.add('ring-2');
    }

    async function updateStats(filename, text) {
      if (filename === 'PROJECTS.md') {
        const activeCount = (text.match(/üü¢|üü°/g) || []).length;
        document.getElementById('stat-projects').textContent = activeCount || '2';
      }
      if (filename === 'CAPTURE.md') {
        const taskCount = (text.match(/- \[ \]/g) || []).length;
        document.getElementById('stat-tasks').textContent = taskCount || '0';
      }
      if (filename === 'RESEARCH.md') {
        const researchCount = (text.match(/- \[ \]|üîç|üìö/g) || []).length;
        document.getElementById('stat-research').textContent = researchCount || '0';
      }
      if (filename === 'CLIENTS.md') {
        const clientCount = (text.match(/##\s+[A-Z]/g) || []).length;
        document.getElementById('stat-clients').textContent = clientCount || '0';
      }
    }

    // Load all stats on startup
    async function loadAllStats() {
      const files = ['PROJECTS.md', 'CAPTURE.md', 'RESEARCH.md', 'CLIENTS.md'];
      for (const file of files) {
        try {
          const response = await fetch(`${BASE_PATH}/${file}`);
          if (response.ok) {
            const text = await response.text();
            updateStats(file, text);
          }
        } catch (e) {
          // Ignore errors for missing files
        }
      }
    }

    // Set timestamp
    document.getElementById('timestamp').textContent = new Date().toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });

    // Load stats and default content
    loadAllStats();
    loadFile('PROJECTS.md');
  </script>
</body>
</html>
