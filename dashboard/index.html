<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toolkit Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/marked/marked.min.js"></script>
  <style>
    .prose h1 { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
    .prose h2 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
    .prose h3 { font-size: 1.1rem; font-weight: 600; margin-top: 1rem; }
    .prose table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
    .prose th, .prose td { border: 1px solid #e5e7eb; padding: 0.5rem; text-align: left; }
    .prose th { background: #f9fafb; font-weight: 600; }
    .prose ul { list-style: disc; margin-left: 1.5rem; }
    .prose code { background: #f3f4f6; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-size: 0.875rem; }
    .prose pre { background: #1f2937; color: #f9fafb; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
    .prose a { color: #7c3aed; text-decoration: underline; }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <nav class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 py-3">
      <div class="flex items-center justify-between">
        <h1 class="text-xl font-bold text-gray-900">üõ†Ô∏è Toolkit Dashboard</h1>
        <div class="flex gap-2">
          <button onclick="loadFile('PROJECTS.md')" class="px-3 py-1 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 text-sm font-medium">Projects</button>
          <button onclick="loadFile('CAPTURE.md')" class="px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-sm font-medium">Capture</button>
          <button onclick="loadFile('CLIENTS.md')" class="px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 text-sm font-medium">Clients</button>
          <button onclick="loadFile('RESEARCH.md')" class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 text-sm font-medium">Research</button>
          <button onclick="loadFile('CONTENT.md')" class="px-3 py-1 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 text-sm font-medium">Content</button>
          <button onclick="loadFile('WEEKLY-REVIEW.md')" class="px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 text-sm font-medium">Review</button>
        </div>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
      <!-- Quick Stats -->
      <div class="bg-white rounded-xl shadow-sm p-6 border">
        <h2 class="text-sm font-medium text-gray-500 mb-2">Active Projects</h2>
        <p class="text-3xl font-bold text-gray-900" id="stat-projects">-</p>
      </div>
      <div class="bg-white rounded-xl shadow-sm p-6 border">
        <h2 class="text-sm font-medium text-gray-500 mb-2">Open Tasks</h2>
        <p class="text-3xl font-bold text-gray-900" id="stat-tasks">-</p>
      </div>
      <div class="bg-white rounded-xl shadow-sm p-6 border">
        <h2 class="text-sm font-medium text-gray-500 mb-2">Pending Research</h2>
        <p class="text-3xl font-bold text-gray-900" id="stat-research">-</p>
      </div>
    </div>

    <!-- Main Content -->
    <div class="bg-white rounded-xl shadow-sm border p-6">
      <div id="content" class="prose max-w-none">
        <p class="text-gray-500">Loading...</p>
      </div>
    </div>
  </main>

  <script>
    // Detect if running on GitHub Pages or locally
    const isGitHubPages = window.location.hostname.includes('github.io');
    const BASE_PATH = isGitHubPages ? '/toolkit' : '..';
    
    async function loadFile(filename) {
      try {
        const response = await fetch(`${BASE_PATH}/${filename}`);
        const text = await response.text();
        document.getElementById('content').innerHTML = marked.parse(text);
        updateStats(filename, text);
      } catch (error) {
        document.getElementById('content').innerHTML = `<p class="text-red-500">Error loading ${filename}: ${error.message}</p>`;
      }
    }

    function updateStats(filename, text) {
      if (filename === 'PROJECTS.md') {
        const activeCount = (text.match(/üü¢|üü°/g) || []).length;
        document.getElementById('stat-projects').textContent = activeCount;
      }
    }

    // Load projects by default
    loadFile('PROJECTS.md');
  </script>
</body>
</html>